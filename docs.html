<!doctype html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8">
    <title>Documentation</title>
    <link rel="stylesheet" href="css/site.css">
  </head>
  <body>
    <div class="maincontainer">
      <header>
          JS Cause
      </header>
      
      <div class="topmenu">
        <ul>
    
      
        <li><a href="index.html">Main</a></li>
      
    
      
        <li><a href="features.html">Features</a></li>
      
    
      
        <li><a href="download.html">Download</a></li>
      
    
      
        <li><a href="install.html">Installation</a></li>
      
    
      
        <li><a href="tutorial.html">Tutorial</a></li>
      
    
      
        <li>Documentation</li>
      
    
      
        <li><a href="faq.html">Frequently Asked Questions</a></li>
      
    
      
        <li><a href="about.html">About</a></li>
      
    
</ul>

      </div>
      
      <div class="title">
          <h1>Documentation</h1>
      </div>
      <div class="content">
          <p>(TO-DO: Address all the TO-DO’s before publishing)</p>

<h2 id="what-is-jscause">What is JSCause?</h2>

<p>JSCause is a web framework and engine built on top of NodeJS which can be used to create simple websites.  Or complex ones, if you so desire.</p>

<p>JSCause can serve HTML, CSS and JS files for a browser to render, just like a regular HTTP server such as Apache or nginx.  It can also preprocess files on the server side, much like how ASP Classic and PHP do.</p>

<p>For example, in ASP Classic, you can have an <code class="highlighter-rouge">index.asp</code> file which, among other things, could contain the following:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h1&gt;Hello from ASP&lt;/h1&gt;
&lt;p&gt;&lt;% Response.Write("Hello, World") %&gt;&lt;/p&gt;
</code></pre></div></div>

<p>In PHP, that would be an <code class="highlighter-rouge">index.php</code> file:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h1&gt;Hello from PHP&lt;/h1&gt;
&lt;p&gt;&lt;?php echo 'Hello, World'; ?&gt;&lt;/p&gt;
</code></pre></div></div>

<p>In JSCause, it would be <code class="highlighter-rouge">index.jscp</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;h1&gt;Hello from JSCause&lt;/h1&gt;
&lt;p&gt;&lt;js rt.print('Hello, World'); /js&gt;&lt;/p&gt;
</code></pre></div></div>

<p>The <code class="highlighter-rouge">jscp</code> extension stands for “[J]ava[S]cript [C]ompiled [P]age.”</p>

<h2 id="structure-of-a-jscause-site">Structure of a JSCause site</h2>

<p>A typical JSCause installation will have the following file and directory structure:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> ./jscause.js
 ./jscause.conf
 ./jscvendor/
 ./logs/
 ./sites/mysite/
 ./sites/mysite/configuration/site.json
 ./sites/mysite/logs/
 ./sites/mysite/website/
</code></pre></div></div>

<h3 id="the-interesting-stuff">The interesting stuff</h3>

<ul>
  <li>
    <p><code class="highlighter-rouge">sites/mysite</code>: This subdirectory contains your site’s actual content, configuration and logs.  It can be renamed in <code class="highlighter-rouge">jscause.conf</code> (read below.)</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">sites/mysite/website/</code>:  This subdirectory will contain your website’s files and resources to be served to the browser and other web clients:  All your HTML, CSS and Javascript files go in here.  Other assets go here as well; such as images and files to be downloaded.  Dynamic <code class="highlighter-rouge">.jscp</code> files also go here.  These will be parsed and executed by JSCause, and the result of said execution will be sent to the web client.  <a href="#the-website-directory-all-your-websites-content">Read more about this directory here</a>.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">sites/mysite/configuration/site.json</code>: In this file you can configure the details of your website: host name and port, upload limits, logging, etc. <a href="#sitejson-configuring-your-websites-details">Read more about this file in the site.json section</a>.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">sites/mysite/logs/</code>:  In this subdirectory, JSCause will log access and error entries pertaining to your website.</p>
  </li>
</ul>

<h3 id="the-important-to-know-stuff">The important to know stuff</h3>

<ul>
  <li>
    <p><code class="highlighter-rouge">jscause.conf</code>: This file holds JSCause’s general configuration.  You can specify here where your content and log files are, whether to accept secure HTTPS connections, etc.  It may also hold configuration options that apply to, and prevail over, a website’s <code class="highlighter-rouge">site.json</code> configuration.  You can <a href="#jscauseconf-configuring-jscause-to-serve-your-website">read more about this file here</a>.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">logs/</code>: This directory contains the server access and error logs.</p>
  </li>
</ul>

<h3 id="the-boilerplate-stuff">The boilerplate stuff</h3>

<ul>
  <li>
    <p><code class="highlighter-rouge">jscause.js</code>: This file contains the actual JSCause node application.  You use it when running node to start serving your website (<code class="highlighter-rouge">node jscause.js</code>). You won’t normally need to edit this file, ever.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">jscvendor/</code>:  This directory contains the third-party dependencies that support specific JSCause features, such as HTML form handling and cookies.  You won’t normally need to edit the contents of this directory.  “But I thought JSCause didn’t have any dependencies!” you may be thinking.  What we mean by that is that JSCause is self-contained.  Once you download and unzip it, it’s good to go.  <a href="#jscvendor-jscause-vendor-directory">Read more about the jscvendor directory here</a>.</p>
  </li>
</ul>

<h2 id="jscauseconf-configuring-jscause-to-serve-your-website">jscause.conf: Configuring JSCause to serve your website</h2>

<p>When JSCause is invoked, it reads the <code class="highlighter-rouge">jscause.conf</code> file for configuration options. The options are declared as a <em>sort of</em> JSON object.  We use “sort of” here because comments (designated by <code class="highlighter-rouge">//</code>) are allowed, whereas in a truly JSON object, they are not.</p>

<p>The options, in the form of attributes, are case insensitive (i.e. <code class="highlighter-rouge">sites</code> can be written as <code class="highlighter-rouge">Sites</code>, <code class="highlighter-rouge">SITES</code>, <code class="highlighter-rouge">sItEs</code>, etc.)  They are listed below:</p>

<h3 id="sites">sites:</h3>

<p>This is an array of object declarations, each representing a site to be served by JSCause:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"sites": [
  {
    // First site configuration goes here.
  },
  {
    // Second site configuration goes here.
  }
  // etc.
]
</code></pre></div></div>

<p>A site entry can contain the following attributes:</p>

<p><strong><em>name</em></strong></p>

<p>This is the site’s name.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"name": "My Site"
</code></pre></div></div>

<p>“<em>name</em>” must be unique.  If JSCause ever needs to notify or log some event related to the site, it will refer to it by this name.</p>

<p><strong><em>port</em></strong></p>

<p>This is the network port JSCause will listen for client connections.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"port": 3000
</code></pre></div></div>

<p>More than one site can share the same port, as long as they also have a unique host name (read <a href="#sitejson-configuring-your-websites-details">the site.json section</a>) and a unique root directory name (read the next section about <code class="highlighter-rouge">rootDirectoryName</code>.)</p>

<p><strong><em>rootDirectoryName</em></strong></p>

<p>This is the name of the subdirectory the website files are located at inside the <code class="highlighter-rouge">sites/</code> directory.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"rootDirectoryName": "mysite"
</code></pre></div></div>

<p>The above states that the site is under <code class="highlighter-rouge">sites/mysite</code>.</p>

<p>More than one site can share the same root directory name, as long as they use different ports.</p>

<p><strong><em>enableHTTPS</em></strong></p>

<p>This attribute indicates whether the site is served as either HTTPS (<code class="highlighter-rouge">true</code>) or HTTP (<code class="highlighter-rouge">false</code>).</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"enableHTTPS": true
</code></pre></div></div>

<p>If HTTPS is enabled, you must provide JSCause with your certificate file, as well as your certificate’s public key file.  Check out these resources: <a href="#sitejson-configuring-your-websites-details">httpsCertFile and httpsKeyFile section on site.json</a>, and the <a href="#httpsssl-configuration">HTTPS/SSL configuration section</a>.</p>

<h3 id="logging">logging:</h3>

<p>This is a list of attributes to indicate what JSCause will log, and how:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"logging": {
  "general": {
    // Attributes pertaining application-wide logging.
  },
  "perSite": {
    // Attributes pertaining per-site-wide logging.
  }
}
</code></pre></div></div>

<p>To learn more about what type of data JSCause logs, please check out the <a href="#logging">logging section</a>.</p>

<p><strong><em>general</em></strong></p>

<p>A “<em>general</em>” entry can contain the following attributes:</p>

<p><strong>- fileOutput</strong></p>

<p>This attribute indicates whether the log data should be written to the file system.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"fileOutput": "enabled"
</code></pre></div></div>

<p>There are two valid values:</p>
<ul>
  <li><code class="highlighter-rouge">enabled</code>:  Create log files and write to them.  You must provide a valid <code class="highlighter-rouge">directoryName</code> entry (read below.)</li>
  <li><code class="highlighter-rouge">disabled</code>:  No creating log files or writing to them.  In this case, <code class="highlighter-rouge">directoryName</code> can be optional.</li>
</ul>

<p><strong>- directoryName</strong></p>

<p>This is the path of the directory to be used to store JSCause’s log data.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"directoryName": "./logs"
</code></pre></div></div>

<p>The path can be absolute (e.g. <code class="highlighter-rouge">/home/user_name/server_data/logs</code>) or relative (e.g. <code class="highlighter-rouge">./logs</code>).  If relative, it will be relative to the directory where JSCause is installed.</p>

<p>If <code class="highlighter-rouge">fileOutput</code> is false, this attribute is optional.</p>

<p><strong>- consoleOutput</strong></p>

<p>This attribute indicates whether the log data should be printed to the terminal.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"consoleOutput": "enabled"
</code></pre></div></div>

<p>There are two valid values:</p>
<ul>
  <li><code class="highlighter-rouge">enabled</code>:  Print to the terminal.</li>
  <li><code class="highlighter-rouge">disabled</code>:  No printing to the terminal whatsoever.</li>
</ul>

<p><strong><em>perSite</em></strong></p>

<p>This section pertains to site logging.  “<em>perSite</em>” logging captures events related to the website only (for instance, whenever it is accessed, if the site threw an error, or if the user application logs to the console.)  This is different from “<em>general</em>”, which only logs events related to JSCause as an application (for instance, whether it started successfully, what ports are listening, if all the sites and up and running, etc.)</p>

<p>Administrators can indicate whether individual sites can have their own logging configuration or not (e.g., they can disable logging to terminal for all sites, but leave the decision of logging to file to each individual site.)</p>

<p>A “<em>perSite</em>” entry can contain the following attributes:</p>

<p><strong>- fileOutput</strong></p>

<p>This attribute indicates whether the site’s log data should be written to the file system.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"fileOutput": "enabled"
</code></pre></div></div>

<p>There are three valid values:</p>
<ul>
  <li><code class="highlighter-rouge">enabled</code>:  Create log files and write to them.  You must provide a valid <code class="highlighter-rouge">directoryName</code> entry in the site’s <code class="highlighter-rouge">site.json</code> configuration file.  <a href="#sitejson-configuring-your-websites-details">Read more in the site.json section</a>.</li>
  <li><code class="highlighter-rouge">disabled</code>:  No creating log files or writing to them.  In this case, <code class="highlighter-rouge">directoryName</code> can be optional.</li>
  <li><code class="highlighter-rouge">perSite</code>:  Leave it to the sites’ <code class="highlighter-rouge">site.json</code> configuration.</li>
</ul>

<p><strong>- consoleOutput</strong></p>

<p>This attribute indicates whether the site’s log data should be printed to the terminal.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"consoleOutput": "enabled"
</code></pre></div></div>

<p>There are three valid values:</p>
<ul>
  <li><code class="highlighter-rouge">enabled</code>:  Print to the terminal.</li>
  <li><code class="highlighter-rouge">disabled</code>:  No printing to the terminal whatsoever.</li>
  <li><code class="highlighter-rouge">perSite</code>:  Leave it to the sites’ <code class="highlighter-rouge">site.json</code> configuration.</li>
</ul>

<h3 id="requesttimeoutsecs">requestTimeoutSecs:</h3>

<p>This attribute sets the time in seconds JSCause will wait for a request to be handled.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"requestTimeoutSecs": 60
</code></pre></div></div>

<p>The timing starts when the request is created due to a web client contacting JSCause.  It includes the time it takes for the client to finish sending the request (including POST bodies and file uploads), and the time it takes for the website (read, JSCP files) to process the request and send a response.  It also includes the time JSCause takes giving the response for the operating system (OS) to send back to the web client.</p>

<p>So, when JSCause gives the whole response for the operating system to handle, <code class="highlighter-rouge">requestTimeoutSecs</code> stops applying.  This means that the response could take longer than the time specified in <code class="highlighter-rouge">requestTimeoutSecs</code>, simply because it’s not longer under JSCause’s control, but the operating system’s.</p>

<p>If the request exceeds the time specified by <code class="highlighter-rouge">requestTimeoutSecs</code>, JSCause will respond with an HTTP 408 (request timeout) error.</p>

<p>If <code class="highlighter-rouge">requestTimeoutSecs</code> is 0, no timeout is set and, therefore, the request can take as long as it needs.</p>

<p>Here is an example configuration:</p>

<h2 id="example-jscauseconf-configuration">Example jscause.conf configuration</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "sites": [
    {
      "name": "My Site",
      "port": 3000,
      "rootDirectoryName": "mysite",
      "enableHTTPS": false // If true, provide cert information in site.json
    }
  ],
  "logging": {
    "general": {
      "directoryName": "./logs",
      "fileOutput": "enabled",
      "consoleOutput": "enabled"
    },
    "perSite": {
      "fileOutput": "per site",
      "consoleOutput": "per site"
    }
  },
  "requestTimeoutSecs": 60
}
</code></pre></div></div>

<h2 id="sitejson-configuring-your-websites-details">site.json: Configuring your website’s details</h2>

<p>Once JSCause completes initialization via the <code class="highlighter-rouge">jscause.conf</code> file, it will proceed to read the configuration of the website (or websites, if there is more than one.)  JSCause knows how to find this configuration thanks to the <code class="highlighter-rouge">rootDirectoryName</code> attribute declared for each website in <code class="highlighter-rouge">jscause.conf</code>.  <code class="highlighter-rouge">rootDirectoryName</code> indicates where JSCause can find a subdirectory with all the website information.  Such subdirectory will be inside the <code class="highlighter-rouge">sites</code> directory found in the same directory <code class="highlighter-rouge">jscause.js</code>, the main JSCause application, is in.  Once in it, it will then proceed to look for a <code class="highlighter-rouge">configuration</code> subdirectory, then look inside it for a <code class="highlighter-rouge">site.json</code> file.</p>

<p>So, in the example in the previous section, the website has a <code class="highlighter-rouge">rootDirectoryName</code> of “mysite”.  Therefore, JSCause will look for, and read the <code class="highlighter-rouge">sites/mysite/configuration/site.json</code> file.</p>

<p>Just like with <code class="highlighter-rouge">jscause.conf</code>, <code class="highlighter-rouge">site.json</code> is a <em>sort of</em> JSON object (it accepts comments that start with <code class="highlighter-rouge">//</code>.)</p>

<p>The options, in the form of attributes, are case insensitive (i.e. <code class="highlighter-rouge">hostName</code> can be written as <code class="highlighter-rouge">hostname</code>, <code class="highlighter-rouge">Hostname</code>, <code class="highlighter-rouge">HOSTNAME</code>, etc.)  They are listed below:</p>

<p><strong><em>hostName:</em></strong></p>

<p>This is the site’s host name.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"hostName": "example.com"
</code></pre></div></div>

<p>The host name must coincide with the web client’s request host name for JSCause to serve the contents from this site.  So, if <code class="highlighter-rouge">hostName</code> is <code class="highlighter-rouge">jscausesite1</code> but the client requests content from <code class="highlighter-rouge">othersite1</code>, even if it’s the same IP address, JSCause will not respond.</p>

<p>More than one site can share the same host name, as long as they use different ports.</p>

<p><strong><em>canUpload:</em></strong></p>

<p>This attribute determines whether a site can accept POST requests or file uploads, or not.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"canUpload": true
</code></pre></div></div>

<p>The valid values are <code class="highlighter-rouge">true</code> and <code class="highlighter-rouge">false</code>.</p>

<p>If <code class="highlighter-rouge">true</code>, POST requests and uploads are accepted.  If <code class="highlighter-rouge">false</code>, the server will respond with an HTTP 403 (forbidden) error.</p>

<p><strong><em>maxPayloadSizeBytes:</em></strong></p>

<p>This attribute determines the size in bytes of the upload payload in a POST request or file upload.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"maxPayloadSizeBytes": 1024
</code></pre></div></div>

<p>If a payload size exceeds the amount specified in <code class="highlighter-rouge">maxPayloadSizeBytes</code>, JSCause will respond with an HTTP 413 (payload too large) error.</p>

<p>If <code class="highlighter-rouge">maxPayloadSizeBytes</code> is 0, then JSCause assumes no payload size limit.</p>

<p><strong><em>jscpExtensionRequired:</em></strong></p>

<p>This attribute determines whether a query string, or route, must include <code class="highlighter-rouge">.jscp</code> to refer to a JSCP file.</p>

<p>As an example, let’s assume we have the <code class="highlighter-rouge">mysite/page_one.jscp</code> file.  If <code class="highlighter-rouge">jscpExtensionRequired</code> is set as <code class="highlighter-rouge">always</code>, then the URL referring to the index file must include <code class="highlighter-rouge">.jscp</code> in it:  <code class="highlighter-rouge">http://example.com/page_one.jscp</code>.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"jscpExtensionRequired": "optional"
</code></pre></div></div>

<p>There are three valid values:</p>
<ul>
  <li>
    <p><code class="highlighter-rouge">never</code>:  The URL must <em>never</em> include <code class="highlighter-rouge">.jscp</code>.  So, in the example above, <code class="highlighter-rouge">http://example.com/page_one.jscp</code> will throw an HTTP 404 (not found) error.  <code class="highlighter-rouge">http://example.com/page_one</code> will work.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">always</code>:  The URL must <em>always</em> include <code class="highlighter-rouge">.jscp</code>.  In the example above, <code class="highlighter-rouge">http://example.com/page_one</code> will throw an HTTP 404 (not found) error.  <code class="highlighter-rouge">http://example.com/page_one.jscp</code> will work.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">optional</code>:  The URL may include <code class="highlighter-rouge">.jscp</code>, but it’s not required to.  In the example above, both <code class="highlighter-rouge">http://example.com/page_one</code> and <code class="highlighter-rouge">http://example.com/page_one.jscp</code> will work and refer to the same <code class="highlighter-rouge">page_one.jscp</code> file.</p>
  </li>
</ul>

<p><strong><em>httpPoweredByHeader:</em></strong></p>

<p>This attribute determines whether JSCause will include the following header entry in a response: <code class="highlighter-rouge">X-Powered-By: jscause</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"httpPoweredByHeader": "include"
</code></pre></div></div>

<p>There are two valid values:</p>
<ul>
  <li>
    <p><code class="highlighter-rouge">include</code>:  Include the <code class="highlighter-rouge">X-Powered-By</code> header entry in the response.</p>
  </li>
  <li>
    <p><code class="highlighter-rouge">excluse</code>:  Omit the <code class="highlighter-rouge">X-Powered-By</code> header entry from the response.</p>
  </li>
</ul>

<p><strong><em>httpsCertFile:</em></strong></p>

<p>This attribute indicates the location of your certificate file, which is required for HTTPS.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"httpsCertFile": "your-cert-file.pem"
</code></pre></div></div>

<p>Note: The default installation of JSCause includes an example cert file called <code class="highlighter-rouge">jscause-cert.pem</code>.  Do <em>NOT</em> use this in production!  User’s browsers will emit a security warning.</p>

<p><strong><em>httpsKeyFile:</em></strong></p>

<p>This attribute indicates the location of your private key file, which is required for HTTPS.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"httpsKeyFile": "your-key-file.pem"
</code></pre></div></div>

<p>Note: The default installation of JSCause includes an example key file called <code class="highlighter-rouge">jscause-key.pem</code>.  Do <em>NOT</em> use this in production!  User’s browsers will emit a security warning.</p>

<p><strong><em>tempWorkDirectory:</em></strong></p>

<p>This attribute indicates the location of a temporary directory JSCause can use for internal operation purposes (e.g. file uploads.)</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"tempWorkDirectory": "./workbench"
</code></pre></div></div>

<p>Make sure that this directory is writeable by JSCause.</p>

<p>The path can be absolute (e.g. <code class="highlighter-rouge">/home/user_name/server_data/my_site/workbench</code>) or relative (e.g. <code class="highlighter-rouge">./workbench</code>).  If relative, it will be relative to the site’s <code class="highlighter-rouge">rootDirectoryName</code>.</p>

<p>For example:  if JSCause is installed in <code class="highlighter-rouge">/home/user_name/jscause/</code>, <code class="highlighter-rouge">rootDirectoryName</code> is <code class="highlighter-rouge">mysite</code>, and <code class="highlighter-rouge">tempWorkDirectory</code> is <code class="highlighter-rouge">./workbench</code>, then the latter will be located at <code class="highlighter-rouge">/home/user_name/jscause/sites/mysite/workbench</code>.</p>

<p><strong><em>mimeTypes:</em></strong></p>

<p>This attribute sets a list of MIME types JSCause can associate to certain file/resource extensions.  For example, the <code class="highlighter-rouge">.html</code> file extension is associated with the <code class="highlighter-rouge">text/html</code> MIME type, then JSCause reports this to the requesting client (browser or otherwise) when responding to a request.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"mimeTypes": {
  "include": {
    // Mime types to accept.
  },
  "exclude": {
    // Mime types to exclude or reject.
  }
}
</code></pre></div></div>

<p><strong>- include</strong></p>

<p>This is an object with file extensions as keys, and MIME types as values.  When a client requests a resource with a file extension, JSCause will include in the response the type of file indicated in this list.  For example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  "include": {
    "png": "image/png",
    "some_other_type": "some_other_value"
  }
</code></pre></div></div>

<p>In the example above, when the client requests a PNG resource, JSCause will respond indicating that the resource is of type <code class="highlighter-rouge">image/png</code>.</p>

<p>If you specify an empty string as a value, it will be assumed <code class="highlighter-rouge">application/octet-stream</code>, and a warning will be shown in the server console during startup.</p>

<p>There are a few MIME types that JSCause will handle automatically, so they don’t need to be added to the <code class="highlighter-rouge">"include"</code> list.  Those are:</p>

<ul>
  <li><code class="highlighter-rouge">css</code>: <code class="highlighter-rouge">text/css; charset=utf-8</code></li>
  <li><code class="highlighter-rouge">eot</code>: <code class="highlighter-rouge">application/vnd.ms-fontobject</code></li>
  <li><code class="highlighter-rouge">gif</code>: <code class="highlighter-rouge">image/gif</code></li>
  <li><code class="highlighter-rouge">html</code>: <code class="highlighter-rouge">text/html; charset=utf-8</code></li>
  <li><code class="highlighter-rouge">ico</code>: <code class="highlighter-rouge">image/x-icon</code></li>
  <li><code class="highlighter-rouge">jpg</code>: <code class="highlighter-rouge">image/jpg</code></li>
  <li><code class="highlighter-rouge">js</code>: <code class="highlighter-rouge">text/javascript; charset=utf-8</code></li>
  <li><code class="highlighter-rouge">json</code>: <code class="highlighter-rouge">application/json; charset=utf-8</code></li>
  <li><code class="highlighter-rouge">mp4</code>: <code class="highlighter-rouge">video/mp4</code></li>
  <li><code class="highlighter-rouge">otf</code>: <code class="highlighter-rouge">application/font-otf</code></li>
  <li><code class="highlighter-rouge">png</code>: <code class="highlighter-rouge">image/png</code></li>
  <li><code class="highlighter-rouge">svg</code>: <code class="highlighter-rouge">application/image/svg+xml; charset=utf-8</code></li>
  <li><code class="highlighter-rouge">ttf</code>: <code class="highlighter-rouge">application/font-ttf</code></li>
  <li><code class="highlighter-rouge">txt</code>: <code class="highlighter-rouge">text/plain; charset=utf-8</code></li>
  <li><code class="highlighter-rouge">wav</code>: <code class="highlighter-rouge">audio/wav</code></li>
  <li><code class="highlighter-rouge">woff</code>: <code class="highlighter-rouge">application/font-woff</code></li>
</ul>

<p><strong>- exclude</strong></p>

<p>Unlike <code class="highlighter-rouge">"include"</code>, this attribute is an <em>array</em>, listing all the file extensions that JSCause must <em>not</em> send a specific MIME type for.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"exclude": {
  ["jpg", "docx", "etc"]
}
</code></pre></div></div>

<p>An <code class="highlighter-rouge">application/octet-stream</code> will be sent instead, which may prompt a web browser to download the resource instead of attempting to display it (this, of course, will depend on the browser.)</p>

<p>If the same mime type is added to both <code class="highlighter-rouge">"include"</code> and <code class="highlighter-rouge">"exclude"</code> lists, the lattermost list will prevail (i.e. if <code class="highlighter-rouge">"exclude"</code> is defined after <code class="highlighter-rouge">"include"</code>, then the MIME type will be excluded.)</p>

<p>If a MIME type is defined more than once in the <code class="highlighter-rouge">"include"</code> list, JSCause makes no guarantees as to which value is ultimately used.</p>

<p><strong><em>logging:</em></strong></p>

<p>Just like in <a href="#logging"><code class="highlighter-rouge">site.conf</code></a>, this is a list of attributes to indicate what aspects of the website JSCause will log, and how:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"logging": {
  // Attributes pertaining website logging.
}
</code></pre></div></div>

<p><strong>- fileOutput</strong></p>

<p>This attribute indicates whether the log data should be written to the file system.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"fileOutput": "enabled"
</code></pre></div></div>

<p>There are two valid values:</p>
<ul>
  <li><code class="highlighter-rouge">enabled</code>:  Create log files and write to them.  You must provide a valid <code class="highlighter-rouge">directoryName</code> entry (read below.)</li>
  <li><code class="highlighter-rouge">disabled</code>:  No creating log files or writing to them.  In this case, <code class="highlighter-rouge">directoryName</code> can be optional.</li>
</ul>

<p><strong>- directoryName</strong></p>

<p>This is the path of the directory to be used to store JSCause’s website log data.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"directoryName": "./localLogs"
</code></pre></div></div>

<p>The path can be absolute (e.g. <code class="highlighter-rouge">/home/user_name/server_data/mysite/localLogs</code>) or relative (e.g. <code class="highlighter-rouge">./localLogs</code>).  If relative, it will be relative to the website directory.</p>

<p>If <code class="highlighter-rouge">fileOutput</code> is false, this attribute is optional.</p>

<p><strong>- consoleOutput</strong></p>

<p>This attribute indicates whether the log data should be printed to the terminal.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>"consoleOutput": "enabled"
</code></pre></div></div>

<p>There are two valid values:</p>
<ul>
  <li><code class="highlighter-rouge">enabled</code>:  Print to the terminal.</li>
  <li><code class="highlighter-rouge">disabled</code>:  No printing to the terminal whatsoever.</li>
</ul>

<p>To learn more about what type of data JSCause logs for websites, please check out the <a href="#logging">logging section</a>.</p>

<h2 id="example-sitejson-configuration">Example site.json configuration</h2>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{
  "hostName": "example.com",
  "canUpload": true,
  "maxPayloadSizeBytes": 0,
  "jscpExtensionRequired": "optional",
  "httpPoweredByHeader": "include",
  "httpsCertFile": "jscause-cert.pem", // Use your own cert file.
  "httpsKeyFile": "jscause-key.pem", // Use your own key file.
  "tempWorkDirectory": "./workbench",
  "mimeTypes": {
    "include": {
        "abw": "application/x-abiword",
        "mid": "audio/midi"
    },
    "exclude": [
        "odp",
        "zip"
    ]
  },
  "logging": {
    "directoryName": "./localLogs",
    "consoleOutput": "enabled",
    "fileOutput": "enabled"
  }
}
</code></pre></div></div>

<h2 id="starting-up-jscause">Starting up JSCause</h2>

<p>Once you have configured JSCause and your website, you can run it by changing to the JSCause directoru and issuing the following command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>node jscause
</code></pre></div></div>

<p>JSCause will print out the following (may differ depending on your configuration):</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>*** JSCause Server version [VERSION NUMBER HERE]
INFO: Reading configuration for site 'My Site' from 'sites/mysite'
INFO: Site 'My Site' at https://example.com:80/ assigned to server 0
INFO: ************ All sites' configuration read at this point ********************
INFO: The following sites were set up successfully:
INFO: 'My Site'
INFO: Will start listening.
INFO: Server 0 listening on port 80
</code></pre></div></div>

<p>If the last line is about a server listening on a port, then everything was configured correctly.  Having said that, do check for warning messages (for example: <code class="highlighter-rouge">WARNING: Site configuration: Site 'My Site' has file logging enabled while the server has per-site file logging disabled.</code>)</p>

<p>If you get a warning or an error, refer to the <a href="#troubleshooting-jscause">troubleshooting section</a> to find out how to address it.</p>

<h2 id="stopping-jscause">Stopping JSCause</h2>

<p>You can stop JSCause simply by issuing Ctrl+C in the terminal:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>^C
Received interrupt signal.  Cleaning up before exiting...
Terminated.
</code></pre></div></div>

<p>Or you can send the SIGTERM signal to the JSCause process via the <code class="highlighter-rouge">kill</code> command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ killall node jscause
Received interrupt signal.  Cleaning up before exiting...
Terminated.

[1]+  Done                    node jscause
</code></pre></div></div>

<h2 id="the-website-directory-all-your-websites-content">The website/ directory: All your website’s content</h2>

<p>JSCause will serve everything you place inside the <code class="highlighter-rouge">website</code> directory to the public.  The directory tree of this directory will map the routing tree of your website.</p>

<p>For example, let’s assume that you have a website configured for <code class="highlighter-rouge">https://www.example.com</code>.</p>

<p>If you have the following three files inside <code class="highlighter-rouge">website</code>:</p>

<ul>
  <li><code class="highlighter-rouge">website/index.html</code></li>
  <li><code class="highlighter-rouge">website/scripts/app.js</code></li>
  <li><code class="highlighter-rouge">website/css/styles.css</code></li>
</ul>

<p>Then JSCause will deliver their content when a web client (like a web browser) hits these corresponding urls:</p>

<ul>
  <li><code class="highlighter-rouge">https://www.example.com/index.html</code></li>
  <li><code class="highlighter-rouge">https://www.example.com/scripts/app.js</code></li>
  <li><code class="highlighter-rouge">https://www.example.com/css/styles.css</code></li>
</ul>

<h3 id="jscp-files">JSCP files</h3>

<p>JSCP files end in <code class="highlighter-rouge">.jscp</code>, and are considered executable.  Therefore, they are <em>run</em> instead of having their content delivered.</p>

<p>For example, if you have an <code class="highlighter-rouge">index.jscp</code> file with the following content:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rt.print('Hello, number ' + (2 + 2).toString());
</code></pre></div></div>

<p>Then visiting <code class="highlighter-rouge">https://www.example.com/index.jscp</code> in a web browser will display:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Hello, number 4
</code></pre></div></div>

<p>JSCause will only run JSCP files only if they are located in a site’s <code class="highlighter-rouge">website</code> directory.  If you need to run files outside of <code class="highlighter-rouge">website</code>, use symlinks (use this feature with caution.)</p>

<h3 id="jscm-files">JSCM files</h3>

<p>Files ending in <code class="highlighter-rouge">.jscm</code> are considered executable modules, which can be called by <code class="highlighter-rouge">.jscp</code> files.</p>

<p>JSCM files will never be served directly.  JSCause will issue an HTTP 404 error if it receives a direct request for one.</p>

<p><code class="highlighter-rouge">https://www.example.com/module.jscp --&gt; 404 error</code></p>

<p>JSCause will only run JSCM files only if they are located in a site’s <code class="highlighter-rouge">website</code> directory.  If you need to run files outside of <code class="highlighter-rouge">website</code>, use symlinks (use this feature with caution.)</p>

<h3 id="index-files">Index files</h3>

<p>An <code class="highlighter-rouge">index.jscp</code> file is considered an <em>index file</em>, and serve as the default when a resource/file is omitted in a url (<strong>Note</strong>: <code class="highlighter-rouge">index.html</code> will not work as an index file.  This might be allowed in a future version.)</p>

<p>For example, if your website is hosted at <code class="highlighter-rouge">https://www.example.com</code> and it has the following file:</p>

<p><code class="highlighter-rouge">website/index.jscp</code></p>

<p>Then a web browser can request said file with either <code class="highlighter-rouge">https://www.example.com/index.jscp</code> or just <code class="highlighter-rouge">https://www.example.com</code></p>

<p>Another example:</p>

<p>If the following file exists:</p>

<p><code class="highlighter-rouge">website/stories/index.jscp</code></p>

<p>Then it can be requested via <code class="highlighter-rouge">https://www.example.com/stories/index.jscp</code> or just <code class="highlighter-rouge">https://www.example.com/stories</code></p>

<h3 id="all-the-routing-rules">All the routing rules</h3>

<p>When JSCause receives a request, it applies the following rules to determine which file to serve:</p>

<ol>
  <li>
    <p>If the url is <code class="highlighter-rouge">/</code>, <code class="highlighter-rouge">/index.jscp</code> will be assumed (see #5.)</p>
  </li>
  <li>
    <p>If the url is <code class="highlighter-rouge">/name.jscp</code> (or <code class="highlighter-rouge">/directory/name.jscp</code>), JSCause will check for the file.  If it exists, and <em><code class="highlighter-rouge">jscpExtensionRequired</code></em> is either <code class="highlighter-rouge">optional</code> or <code class="highlighter-rouge">always</code>, it will run it (see #5.)  If it doesn’t, or if the url ends in <code class="highlighter-rouge">/</code> (e.g. <code class="highlighter-rouge">/directory/name/</code> or, if <em><code class="highlighter-rouge">jscpExtensionRequired</code></em> is either <code class="highlighter-rouge">optional</code> or <code class="highlighter-rouge">always</code>, <code class="highlighter-rouge">/directory/name.jscp/</code>), it will assume it’s a directory (see #4.)</p>
  </li>
  <li>
    <p>If the url is <code class="highlighter-rouge">/name</code> (or <code class="highlighter-rouge">/directory/name</code>), and if <em><code class="highlighter-rouge">jscpExtensionRequired</code></em> is either <code class="highlighter-rouge">never</code> or <code class="highlighter-rouge">optional</code>, JSCause will check for the file <code class="highlighter-rouge">/name.jscp</code> (or <code class="highlighter-rouge">/directory/name.jscp</code>.)  If it exists, it will run it (see #5.)  If the file name does not exist, or if the url ends in <code class="highlighter-rouge">/</code>, it will assume it’s a directory (see #4.)</p>
  </li>
  <li>
    <p>If the url refers to a directory (e.g. <code class="highlighter-rouge">/name</code> or <code class="highlighter-rouge">/name/</code>), check for <code class="highlighter-rouge">/name/index.jscp</code>.  This check happens regardless of the value of <em><code class="highlighter-rouge">jscpExtensionRequired</code></em>.</p>
  </li>
  <li>
    <p>If the extension is <code class="highlighter-rouge">.jscp</code> (e.g. <code class="highlighter-rouge">/name.jscp</code> or <code class="highlighter-rouge">/directory/name.jscp</code>), and again, if <em><code class="highlighter-rouge">jscpExtensionRequired</code></em> is either <code class="highlighter-rouge">optional</code> or <code class="highlighter-rouge">always</code> (unless we’re coming from #3, in which case <code class="highlighter-rouge">never</code> is overriden), then JSCause will run the contents and serve its output.</p>
  </li>
  <li>
    <p>If the url is <code class="highlighter-rouge">/name.extension</code>, with the extension being neither <code class="highlighter-rouge">.jscp</code> nor <code class="highlighter-rouge">.jscm</code> (or not present), JSCause will check for the file.  If it exists, JSCause will serve the contents of it (i.e., it is assumed a static resource.)</p>
  </li>
  <li>
    <p>If the extension is <code class="highlighter-rouge">.jscm</code>, serve an HTTP 404 error.</p>
  </li>
  <li>
    <p>If none of the above applies, serve an HTTP 404 error.</p>
  </li>
</ol>

<h2 id="the-runtime-framework">The runtime framework</h2>

<p>When a web client requests a JSCP file (a file ending in <code class="highlighter-rouge">.jscp</code>), JSCause will execute it, then sends the result of the execution as a response.</p>

<p>JSCP files combine HTML and Javascript.  Let’s go through three different scenarios.</p>

<h3 id="jscp-with-javascript-only">JSCP with Javascript only</h3>

<p>A JSCP file can contain just Javascript code.  To send a response back to the web client, use the command <code class="highlighter-rouge">rt.print</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// This is a valid JSCP program
rt.print('Hello, Javascript');
</code></pre></div></div>

<p>When a browser access this file (e.g. <code class="highlighter-rouge">index.jscp</code>), it will display <code class="highlighter-rouge">Hello, Javacript</code> back to the user.</p>

<h3 id="jscp-with-html-only">JSCP with HTML only</h3>

<p>To let JSCP know that the whole file is HTML, start it with <code class="highlighter-rouge"><span class="nt">&lt;html</span> <span class="nt">/&gt;</span></code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;html</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;&lt;title&gt;</span>Sample HTML document<span class="nt">&lt;/title&gt;&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;&lt;h1&gt;</span>Hello, HTML<span class="nt">&lt;/h1&gt;&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>When a browser access this file (e.g. <code class="highlighter-rouge">index.jscp</code>), it will display <code class="highlighter-rouge">Hello, HTML</code> back to the user.</p>

<p>Note: You can replace <code class="highlighter-rouge"><span class="nt">&lt;html</span> <span class="nt">/&gt;</span></code> with <code class="highlighter-rouge">&lt;js/js&gt;</code> and achieve the same thing above.</p>

<h3 id="jscp-with-both-html-and-javascript">JSCP with both HTML and Javascript</h3>

<p>Enclose your Javascript code within <code class="highlighter-rouge">&lt;js&gt;</code> tags (<code class="highlighter-rouge">&lt;js</code> and <code class="highlighter-rouge">/js&gt;</code>).  Anything outside of the tags will be considered HTML.</p>

<p>Here’s an example - The value of PI:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;&lt;title&gt;</span>Sample HTML document<span class="nt">&lt;/title&gt;&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Hello, PI<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;p&gt;</span>PI is: <span class="nt">&lt;js</span> <span class="na">rt</span><span class="err">.</span><span class="na">print</span><span class="err">(</span><span class="na">Math</span><span class="err">.</span><span class="na">PI</span><span class="err">);</span> <span class="err">/</span><span class="na">js</span><span class="nt">&gt;</span>
<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div></div>

<p>Notice that there is no need to include <code class="highlighter-rouge"><span class="nt">&lt;html</span> <span class="nt">/&gt;</span></code> at the top of a file if it contains executable Javascript code.</p>

<p>Another example - Children 3 years and under enter the theater for free:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;js const randomAge = Math.floor(Math.random() * 120); /js&gt;
&lt;p&gt;John's age is: &lt;js rt.print(randomAge); /js&gt;&lt;/p&gt;
&lt;js if (randomAge &lt;= 3) { /js&gt;
  &lt;p&gt;John can enter the theater for free.&lt;/p&gt;
&lt;js } else { /js&gt;
  &lt;p&gt;John will need a ticket in order to enter the theater.&lt;/p&gt;
&lt;js } /js&gt;
</code></pre></div></div>

<p>Alternatively:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;js
  const randomAge = Math.floor(Math.random() * 120);
  const message = (randomAge &lt;= 3) ?
    'John can enter the theater for free.' :
    'John will need a ticket in order to enter the theater.';
/js&gt;
&lt;p&gt;John's age is: &lt;js rt.print(randomAge); /js&gt;&lt;/p&gt;
&lt;p&gt;&lt;js rt.print(message); /js&gt;&lt;/p&gt;
</code></pre></div></div>

<h3 id="jscause-modules-jscm-files">JSCause modules: JSCM files</h3>

<p>JSCM files have the <code class="highlighter-rouge">.jscm</code> extension.  They are essentially regular Javascript modules.  You can import them in your program with the <code class="highlighter-rouge">rt.module()</code> instruction:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const myModule = rt.module('myModule');
</code></pre></div></div>

<p>Example:</p>

<p>Let’s create a <code class="highlighter-rouge">sum.jscm</code> module file with the following contents:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module.exports =
{
  addTwo(a, b)
  {
    return a + b;
  },
  numberFive: 5
};
</code></pre></div></div>

<p>And an <code class="highlighter-rouge">index.jscp</code> file with the following contents:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>const sumModule = rt.module('sum');

rt.print(sumModule.addTwo(1, 2));
rt.print(' and ');
rt.print(sumModule.numberFive);
</code></pre></div></div>

<p>When we hit <code class="highlighter-rouge">/index.jscp</code> in the browser, the following will be displayed in the browser window:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>3 and 5
</code></pre></div></div>

<h3 id="rt-in-modules">rt in modules</h3>

<p>You may notice that <code class="highlighter-rouge">rt</code> is not available in modules, at least, not directly.  So, instructions such as <code class="highlighter-rouge">rt.print</code> are not available.</p>

<p>Consider this module:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module.exports =
{
  twoSum(a, b)
  {
    rt.print(a,b);
  }
};
</code></pre></div></div>

<p>If we import it in our code as <code class="highlighter-rouge">printSum</code>, and attempt to use <code class="highlighter-rouge">twoSum()</code>:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  const printSum = rt.module('printSum');
  printSum.twoSum(1, 2);
</code></pre></div></div>

<p>JSCause will report an HTTP error 500 back to the browser, and print something similar to the following to the console:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ERROR: Site: My Site: Runtime error on file /index.jscp: rt is not defined at line 1
ReferenceError: rt is not defined
    at Object.addTwo (/jscause_path/sites/mysite/website/sum.jscm:5:7)
    at ... [etc]
Thu, 12 Dec 2019 05:05:26 GMT - example.com - GET: / - 500
</code></pre></div></div>

<p>To overcome that, we can pass the <code class="highlighter-rouge">rt</code> object to the module as a function parameter:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>module.exports = function(rt)
{
  return {
    twoSum(a, b)
    {
      rt.print(a,b);
    }
  };
};
</code></pre></div></div>

<p>Then we modify our main code:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  const printSum = rt.module('printSum')(rt);
  printSum.twoSum(1, 2);
</code></pre></div></div>

<p>We’ll no longer get an HTTP error 500, and the browser will display <code class="highlighter-rouge">3</code>.</p>

<h3 id="the-rt-runtime-object">The rt runtime object</h3>

<p><code class="highlighter-rouge">rt</code> stands for “runtime,” and it’s the object that contains a library of convenient methods and variables to make things easier for you, the developer.</p>

<p><code class="highlighter-rouge">rt</code> exists in every JSCP file.  To use it in JSCM modules, the calling JSCP file will need to pass it <code class="highlighter-rouge">rt</code> as a parameter - see the previous section, <a href="#rt-in-modules">rt in modules</a>.</p>

<h4 id="rtadditional">rt.additional</h4>

<p><em>Type</em>: Object.</p>

<p>It contains additional values related to a previously run JSCause operation, or an error.</p>

<p>At the moment, the only value available is <code class="highlighter-rouge">rt.additional.jsonParseError</code>, which will be set to <code class="highlighter-rouge">true</code> if an incoming request includes a JSON-formatted payload, and JSCause was unable to parse it )(for instance, if it was malformed.)</p>

<p>Example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;html&gt;</span>
<span class="nt">&lt;head&gt;&lt;/head&gt;</span>
<span class="nt">&lt;body&gt;</span>
<span class="nt">&lt;js</span> <span class="na">if</span> <span class="err">(</span><span class="na">rt</span><span class="err">.</span><span class="na">additional</span><span class="err">.</span><span class="na">jsonParseError</span><span class="err">)</span> <span class="err">{</span>
      <span class="na">rt</span><span class="err">.</span><span class="na">print</span><span class="err">('</span><span class="na">Sorry</span><span class="err">,</span> <span class="na">the</span> <span class="na">upload</span> <span class="na">JSON</span> <span class="na">object</span> <span class="na">was</span> <span class="na">not</span> <span class="na">understood</span><span class="err">');</span>
    <span class="err">}</span>
<span class="err">/</span><span class="na">js</span><span class="nt">&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</code></pre></div></div>

<p>See also:</p>
<ul>
  <li><a href="#rtpostparams">rt.postParams</a></li>
</ul>

<h4 id="rtcontenttype">rt.contentType</h4>

<p><em>Type</em>: String.</p>

<p>It contains the content type of the request.  For example, <code class="highlighter-rouge">text/plain</code>.</p>

<p>Having said that, there are three cases which will set <code class="highlighter-rouge">contentType</code> to values unique to JSCause:</p>

<ul>
  <li><code class="highlighter-rouge">formData</code>: When the request contains a submitted HTML form.</li>
  <li><code class="highlighter-rouge">formDataWithUpload</code>:  When the request contains a submitted HTML form and/or uploaded files.</li>
  <li><code class="highlighter-rouge">jsonData</code>: When the request is submitted as JSON.</li>
</ul>

<p>See also:</p>
<ul>
  <li><a href="#rtpostparams">rt.postParams</a></li>
  <li><a href="#rtuploadedfiles">rt.uploadedFiles</a></li>
  <li><a href="#rtmovefile">rt.moveFile</a></li>
  <li><a href="#rtreadfile">rt.readFile</a></li>
  <li><a href="#rtrequestmethod">rt.requestMethod</a></li>
</ul>

<h4 id="rtcopyfile">rt.copyFile()</h4>

<p><em>Type</em>: Method.</p>

<p><em>Syntax</em>: <code class="highlighter-rouge">rt.copyFile(source:String, destination:String, [overwrite:Boolean = true])</code></p>

<p><em>Returns</em>: RT Promise.</p>

<p>It copies a file from <code class="highlighter-rouge">source</code> to <code class="highlighter-rouge">destination</code>.  <code class="highlighter-rouge">overwrite</code> is optional, and <code class="highlighter-rouge">true</code> by default.</p>

<p>Example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rt.copyFile('my_source.txt', 'my_destination.txt')
  .rtOnSuccess(() =&gt; { rt.print('File copied successfully!'); })
  .rtOnError((err) =&gt; { rt.print(`There was an error: ${err}`); });
</code></pre></div></div>

<p><code class="highlighter-rouge">source</code> and <code class="highlighter-rouge">destination</code> can be either absolute or relative paths.</p>

<p>If a relative path, it will be relative to the site’s <code class="highlighter-rouge">rootDirectoryName</code>.  For example:  if JSCause is installed in <code class="highlighter-rouge">/home/user_name/jscause/</code>, <code class="highlighter-rouge">rootDirectoryName</code> is <code class="highlighter-rouge">mysite</code>, and <code class="highlighter-rouge">source</code> is <code class="highlighter-rouge">./folder/file.txt</code>, then the latter will be intepreted as <code class="highlighter-rouge">/home/user_name/jscause/sites/mysite/folder/file.txt</code>.</p>

<p>If <code class="highlighter-rouge">destination</code> exists prior to the copy operation, JSCause will check the value of <code class="highlighter-rouge">overwrite</code>.  If <code class="highlighter-rouge">overwrite</code> is <code class="highlighter-rouge">true</code>, then the copy operation will overwrite whatever is in <code class="highlighter-rouge">destination</code>.  If <code class="highlighter-rouge">overwrite</code> is <code class="highlighter-rouge">false</code>, then JSCause will <em>not</em> proceed with the copy operation, and will emit an <code class="highlighter-rouge">EEXISTS</code> error instead.</p>

<p><code class="highlighter-rouge">rt.copyFile</code> returns an RT Promise, which consists in two chainable methods, <code class="highlighter-rouge">rtOnSuccess()</code> and <code class="highlighter-rouge">rtOnError()</code>.  Only one of them will apply depending on whether the copy operation succeeds or fails.  When the copy operation succeeds, JSCause will invoke the callback specified by <code class="highlighter-rouge">rtOnSuccess()</code>.  If it fails, JSCause will invole the callback specified by <code class="highlighter-rouge">rtOnError()</code>.</p>

<p>Note:  You will read elsewhere in this document that callbacks must be wrapped with <code class="highlighter-rouge">rt.waitFor()</code>.  When you use <code class="highlighter-rouge">rtOnSuccess()</code> and <code class="highlighter-rouge">rtOnError()</code>, no such wrapping is necessary.  You can <a href="#rt-promises">read more about RT Promises here</a>.</p>

<p>This method relies on node’s <code class="highlighter-rouge">fs.readFile</code>.  Any strengths and limitations of the latter will apply to <code class="highlighter-rouge">rt.readFile</code> as well.</p>

<p>See also:</p>
<ul>
  <li><a href="#rtmovefile">rt.moveFile</a></li>
  <li><a href="#rtreadfile">rt.readFile</a></li>
  <li><a href="#rtdeletefile">rt.deleteFile</a></li>
  <li><a href="#rtfileexists">rt.fileExists</a></li>
  <li><a href="#rtuploadedfiles">rt.uploadedFiles</a></li>
  <li><a href="#rtrunafter">rt.runAfter</a></li>
  <li><a href="#rt-promises">RT Promises</a></li>
</ul>

<h4 id="rtdeletecookie">rt.deleteCookie()</h4>

<p><em>Type</em>: Method.</p>

<p><em>Syntax</em>: <code class="highlighter-rouge">rt.deleteCookie(name:String)</code></p>

<p><em>Returns</em>: Boolean.</p>

<p>It deletes a browser cookie.</p>

<p>Example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rt.deleteCookie('my_cookie');
</code></pre></div></div>

<p>If it succeeds, it will return <code class="highlighter-rouge">true</code>.  Otherwise, it will return <code class="highlighter-rouge">false</code>.</p>

<p>See also:</p>
<ul>
  <li><a href="#rtgetcookie">rt.getCookie</a></li>
  <li><a href="#rtsetcookie">rt.setCookie</a></li>
</ul>

<p>#### rt.deleteFile()</p>

<p><em>Type</em>: Method.</p>

<p><em>Syntax</em>: <code class="highlighter-rouge">rt.deleteFile(filePath:String)</code></p>

<p><em>Returns</em>: RT Promise.</p>

<p>It deletes a file specified by <code class="highlighter-rouge">filePath</code>.</p>

<p>Example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rt.deleteFile('my_file.txt')
  .rtOnSuccess(() =&gt; { rt.print('File deleted successfully!'); })
  .rtOnError((err) =&gt; { rt.print(`There was an error: ${err}`); });
</code></pre></div></div>

<p><code class="highlighter-rouge">filePath</code> can be either absolute or relative.</p>

<p><code class="highlighter-rouge">rt.deleteFiles()</code> will not delete directories.</p>

<p>Please see the notes on <a href="#rtcopyfile">rt.copyFile()</a> for more information on file operations on relative paths, as well as the RT Promise type.</p>

<p>This method relies on node’s <code class="highlighter-rouge">fs.unlink</code>.  Any strengths and limitations of the latter will apply to <code class="highlighter-rouge">rt.deleteFile</code> as well.</p>

<p>See also:</p>
<ul>
  <li><a href="#rtdeletefile">rt.copyFile</a></li>
  <li><a href="#rtmovefile">rt.moveFile</a></li>
  <li><a href="#rtreadfile">rt.readFile</a></li>
  <li><a href="#rtfileexists">rt.fileExists</a></li>
  <li><a href="#rtuploadedfiles">rt.uploadedFiles</a></li>
  <li><a href="#rtrunafter">rt.runAfter</a></li>
  <li><a href="#rt-promises">RT Promises</a></li>
</ul>

<h4 id="rtfileexists">rt.fileExists()</h4>

<p><em>Type</em>: Method.</p>

<p><em>Syntax</em>: <code class="highlighter-rouge">rt.fileExists(filePath:String)</code></p>

<p><em>Returns</em>: RT Promise.</p>

<p>It determined whether a file specified by <code class="highlighter-rouge">filePath</code> exists or not.</p>

<p>Example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rt.fileExists('my_file.txt')
  .rtOnSuccess(() =&gt; { rt.print('File exists!'); })
  .rtOnError((err) =&gt; { rt.print((err === 'ENOENT') ? 'File does not exist' : `There was an error: ${err}`); });
</code></pre></div></div>

<p><code class="highlighter-rouge">filePath</code> can be either absolute or relative.</p>

<p>As seen from the example above, <code class="highlighter-rouge">rtOnSuccess</code> is called if file exists.  <code class="highlighter-rouge">rtOnError</code> will be called if file does not exist, but <em>also</em> if some other error happens.  Always check the error.  When the file does not exist, the error will be <code class="highlighter-rouge">ENOENT</code>.  Anything different from <code class="highlighter-rouge">ENOENT</code> should be addressed.</p>

<p>Please see the notes on <a href="#rtcopyfile">rt.copyFile()</a> for more information on file operations on relative paths, as well as the RT Promise type.</p>

<p>This method relies on node’s <code class="highlighter-rouge">fs.stat</code>.  Any strengths and limitations of the latter will apply to <code class="highlighter-rouge">rt.fileExists</code> as well.</p>

<p>See also:</p>
<ul>
  <li><a href="#rtdeletefile">rt.copyFile</a></li>
  <li><a href="#rtmovefile">rt.moveFile</a></li>
  <li><a href="#rtreadfile">rt.readFile</a></li>
  <li><a href="#rtdeletefile">rt.deleteFile</a></li>
  <li><a href="#rtuploadedfiles">rt.uploadedFiles</a></li>
  <li><a href="#rtrunafter">rt.runAfter</a></li>
  <li><a href="#rt-promises">RT Promises</a></li>
</ul>

<h4 id="rtgetcookie">rt.getCookie()</h4>

<p>Does this or that.</p>

<h4 id="rtgetcurrentpath">rt.getCurrentPath()</h4>

<p>Does this or that.</p>

<h4 id="rtgetparams">rt.getParams</h4>

<p>Does this or that.</p>

<h4 id="rtheader">rt.header()</h4>

<p>Does this or that.</p>

<h4 id="rtmodule">rt.module()</h4>

<p>Does this or that.</p>
<ul>
  <li>Absolute paths are not permitted.</li>
</ul>

<h4 id="rtmovefile">rt.moveFile()</h4>

<p>Does this or that.</p>

<h4 id="rtpostparams">rt.postParams</h4>

<p>Does this or that.</p>

<h4 id="rtprint">rt.print()</h4>

<p>Does this or that.</p>

<h4 id="rtreadfile">rt.readFile()</h4>

<p>Does this or that.</p>

<h4 id="rtredirectto">rt.redirectTo()</h4>

<p>Does this or that.</p>

<h4 id="rtrequestmethod">rt.requestMethod</h4>

<p>Does this or that.</p>

<h4 id="rtresetredirectto">rt.resetRedirectTo()</h4>

<p>Does this or that.</p>

<h4 id="rtrunafter">rt.runAfter()</h4>

<p>Does this or that.</p>

<h4 id="rtsetcookie">rt.setCookie()</h4>

<p>Does this or that.</p>

<h4 id="rtunsafeprint">rt.unsafePrint()</h4>

<p>Does this or that.</p>

<h4 id="rtuploadedfiles">rt.uploadedFiles</h4>

<p>Does this or that.</p>

<h4 id="rtwaitfor">rt.waitFor()</h4>

<p>Does this or that.</p>

<h2 id="rt-promises">RT Promises:</h2>
<ul>
  <li>Chain it with .rtOnSuccess() with a callback with the response as a parameter:
 rt.readFile(path).rtOnSuccess((response) =&gt; { rt.print(response); });</li>
  <li>Chain it with .rtOnError() with a callback with the error as a parameter:
 rt.readFile(path)
 .rtOnSuccess((response) =&gt; { rt.print(response); });
 .rtOnError((err) =&gt; { rt.print(err.code); });
    <ul>
      <li>No need to wrap the callback with a waitFor().</li>
    </ul>
  </li>
  <li>rtOnSuccess() and rtOnError() can be omitted (but if omitted, and an error occurs, the server will issue a runtime error.)
    <ul>
      <li>rtOnSuccess() and rtOnError() can omit their parameter (that is, their callback.)  This is not advisable from an application development standpoint, but it’s allowed.</li>
    </ul>
  </li>
</ul>

<hr />

<p>Miscellaneous (where to put in this file?):</p>

<ul>
  <li>
    <p>Never trust user input!</p>
  </li>
  <li>
    <p>The file name is case-sensitive (if the file system allows it).  A file will be considered JSCP only if its extension is lower case (that is, .jscp is valid, but .JSCP is not.)  Same with JSCM.</p>
  </li>
  <li>
    <p>Sanitization</p>
    <ul>
      <li>See symbolsToSanitize in code.</li>
    </ul>
  </li>
</ul>

<hr />
<h2 id="logging-1">Logging</h2>

<p>here we talk about logging</p>
<ul>
  <li>What kind of data is logged.</li>
</ul>

<h3 id="log-file-compression-and-rotation">Log file compression and rotation</h3>

<ul>
  <li>If files, how the files are created and rotated (if not covered in the configuration files.)</li>
</ul>

<h2 id="httpsssl-configuration">HTTPS/SSL configuration</h2>

<p>here we talk about configuring SSL.</p>

<h2 id="jscvendor-jscause-vendor-directory">jscvendor: JSCause vendor directory</h2>

<p>In a typical installation workflow, all you need to get JSCause up and running is to download the zip file, unzip it and run it.  No need to run an <code class="highlighter-rouge">npm install</code> command, or generate some usually big <code class="highlighter-rouge">node_modules/</code> directory that requires maintaining.</p>

<p>Of course, if you prefer to install via <code class="highlighter-rouge">npm</code>, <a href="/download.html">you can still do so</a>.</p>

<h2 id="symbolic-links-in-configuration-and-websites">Symbolic links in configuration and websites</h2>

<p>Here we’ll talk about how to handle symoblic links.</p>

<h2 id="troubleshooting-jscause">Troubleshooting JSCause</h2>

<p>Troubleshooting here.</p>

<h2 id="more-resources">More resources</h2>

<p>Where to find more information about JSCause?</p>


      </div>
      <div class="topmenu">
        <ul>
    
      
        <li><a href="index.html">Main</a></li>
      
    
      
        <li><a href="features.html">Features</a></li>
      
    
      
        <li><a href="download.html">Download</a></li>
      
    
      
        <li><a href="install.html">Installation</a></li>
      
    
      
        <li><a href="tutorial.html">Tutorial</a></li>
      
    
      
        <li>Documentation</li>
      
    
      
        <li><a href="faq.html">Frequently Asked Questions</a></li>
      
    
      
        <li><a href="about.html">About</a></li>
      
    
</ul>

      </div>
      <footer>
          &copy; 2019 EighthJouster
      </footer>
  </body>
</html>
